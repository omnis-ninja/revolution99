!function(){"use strict";function e(e,t,o){e.when("/",{controller:"HomeController",templateUrl:"app/home/home.view.html",controllerAs:"vm"}).when("/login",{controller:"LoginController",templateUrl:"app/login/login.view.html",controllerAs:"vm"}).when("/logout",{controller:"LogoutController",templateUrl:"app/login/logout.view.html",controllerAs:"vm"}).when("/forgotPassword",{controller:"LoginController",templateUrl:"app/login/forgotPassword.view.html",controllerAs:"vm"}).when("/forgotPasswordSuccess",{controller:"LoginController",templateUrl:"app/login/forgotPasswordSuccess.view.html",controllerAs:"vm"}).when("/scheduledEventsCalendar",{controller:"ScheduledEventsCalendarController",templateUrl:"app/eventsCalendar/scheduledEventsCalendar.view.html",controllerAs:"vm"}).when("/upcomingEventsCalendar",{controller:"UpcomingEventsCalendarController",templateUrl:"app/eventsCalendar/upcomingEventsCalendar.view.html",controllerAs:"vm"}).when("/profilePage",{controller:"ProfilePageController",templateUrl:"app/profilePage/profilePage.view.html",controllerAs:"vm"}).when("/register",{controller:"RegisterController",templateUrl:"app/register/register.view.html",controllerAs:"vm"}).otherwise({redirectTo:"/login"})}function t(e,t,r){e.$on("$locationChangeStart",function(r,n,a){o(t,e)})}function o(e,t){var o=$.inArray(e.path(),["/login","/forgotPassword","/forgotPasswordSuccess"])===-1,r=t.isSuccesfullyLoggedin;o&&!r&&($(".navbar-default").addClass("hide"),e.path("/login"))}angular.module("app",["ngRoute"]).config(e).run(t),e.$inject=["$routeProvider","$locationProvider","$httpProvider"],t.$inject=["$rootScope","$location","$http"],o.$inject=["$location","$rootScope"]}(),function(){"use strict";function e(e,t){function o(){return e({method:"GET",url:t.configData.webApi+"genAppAuthToken",headers:{"Content-Type":"application/json"}})}function r(o){return e({method:"POST",url:t.configData.webApi+"authenticateUser",data:JSON.stringify(o),cache:!1,headers:{"Content-Type":"application/json"}})}function n(o){return e({method:"POST",url:t.configData.webApi+"SignoutUser",data:JSON.stringify(o),cache:!1,headers:{"Content-Type":"application/json"}})}function a(o){return e({method:"POST",url:t.configData.webApi+"changePassword",data:JSON.stringify(o),cache:!1,headers:{"Content-Type":"application/json"}})}function l(){t.globals={},e.defaults.headers.common.Authorization="Basic"}function i(){e.get("config/config.json").success(function(e){t.configData=e}).error(function(e,o,r,n){t.configData=[{heading:"Error",description:"Could not load json   data"}]})}var c={};return c.GetAccessToken=o,c.Login=r,c.Logout=n,c.ForgotPassword=a,c.ClearCredentials=l,i(),c}angular.module("app").factory("AuthenticationService",e),e.$inject=["$http","$rootScope"]}(),function(){"use strict";function e(e,t){function o(o){return e({method:"POST",url:t.configData.webApi+"getEvents",data:JSON.stringify(o),headers:{"Content-Type":"application/json"}})}function r(){e.get("config/config.json").success(function(e){t.configData=e}).error(function(e,o,r,n){t.configData=[{heading:"Error",description:"Could not load json data"}]})}function n(o){return e({method:"POST",url:t.configData.webApi+"subscribeUserToEvent",data:JSON.stringify(o),headers:{"Content-Type":"application/json"}})}function a(o){return e({method:"POST",url:t.configData.webApi+"getUserSubscribedEventsAndEmail",data:JSON.stringify(o),headers:{"Content-Type":"application/json"}})}var l={};return l.GetAllEvents=o,l.SubscribeToEvent=n,l.EmailSchedule=a,r(),l}angular.module("app").factory("EventsService",e),e.$inject=["$http","$rootScope"]}(),function(){"use strict";function e(e){function t(){function t(){var t=e.flash;t&&(t.keepAfterLocationChange?t.keepAfterLocationChange=!1:delete e.flash)}e.$on("$locationChangeStart",function(){t()})}function o(t,o){e.flash={message:t,type:"success",keepAfterLocationChange:o},$("#alertModal").modal("show")}function r(t,o){e.flash={message:t,type:"error",keepAfterLocationChange:o},$("#alertModal").modal("show")}var n={};return n.Success=o,n.Error=r,t(),n}angular.module("app").factory("FlashService",e),e.$inject=["$rootScope"]}(),function(){"use strict";function e(e,t){function o(o){return e({method:"POST",url:t.configData.webApi+"getUserProfile",data:JSON.stringify(o),headers:{"Content-Type":"application/json"}})}function r(o){return e({method:"POST",url:t.configData.webApi+"setUserProfile",data:JSON.stringify(o),headers:{"Content-Type":"application/json"}})}var n={};return n.GetPersonalDetails=o,n.UpdateProfile=r,n}angular.module("app").factory("UserprofileService",e),e.$inject=["$http","$rootScope"]}(),function(){"use strict";function e(){return{SEQ:0,NUM:1,NAME:2,LOCATION:3,START_DATE_TIME:4,END_DATE_TIME:5,TYPE:6,SKILL:7,COORDINATOR:8}}angular.module("app").factory("EventsJSONMapping",e),e.$inject=[]}(),function(){"use strict";function e(e,t,o,r,n){function a(){var n=moment().format("DD/MM/YYYY"),a={cDate:n,from_prev_call:e.for_next_call,uID:e.uID};e.subscribedToEvent?t.GetAllEvents(a).then(function(t){"DEFAULT_OK"!==t.data.errorMSG_internal?(r.Error(t.data.errorMSG_user),i.dataLoading=!1):(e.for_next_call=t.data.for_next_call,e.uID=t.data.uID,e.scheduledEvents=t.data.month_events_list[3],o.showScheduledEvents=o.scheduledEvents[1].length>0)},function(t){r.Error(e.configData.errorMessage)}):(o.scheduledEvents=e.scheduledEvents,o.showScheduledEvents=e.scheduledEvents[1].length>0)}function l(){console.log("email");var o={from_prev_call:e.for_next_call,uID:e.uID};r.Success("Emailing in progress ..."),t.EmailSchedule(o).then(function(t){"DEFAULT_OK"!==t.data.errorMSG_internal?r.Error(t.data.errorMSG_user):(e.for_next_call=t.data.for_next_call,e.uID=t.data.uID,r.Success(t.data.errorMSG_user))},function(t){r.Error(e.configData.errorMessage)})}var i=this;i.EventsJSONMapping=n,i.EmailSchedule=l,function(){a()}()}angular.module("app").controller("ScheduledEventsCalendarController",e),e.$inject=["$rootScope","EventsService","$scope","FlashService","EventsJSONMapping"]}(),function(){"use strict";function e(e,t,o,r,n){function a(){o.upcomingEvents=[],e.scheduledEvents=[];var n=moment().format("DD/MM/YYYY"),a={cDate:n,from_prev_call:e.for_next_call,uID:e.uID};t.GetAllEvents(a).then(function(t){""!==t.data.errorMSG_user?(t={success:!1,message:"Cannot fetch event details"},r.Error(t.message),i.dataLoading=!1):(e.for_next_call=t.data.for_next_call,e.uID=t.data.uID,e.scheduledEvents=t.data.month_events_list[3],t.data.month_events_list.pop(),o.upcomingEvents=t.data.month_events_list,o.showUpcomingEvents=o.upcomingEvents[1].length>0)},function(t){r.Error(e.configData.errorMessage)})}function l(o,n){n.stopPropagation();var a={from_prev_call:e.for_next_call,uID:e.uID,event_row:{eSEQ:o[0],eNum:o[1],eName:o[2],eLocation:o[3],eStart_date_time:o[4],eEnd_date_time:o[5],oType:o[6],oSkill:o[7],eCoordinator:o[8]}};t.SubscribeToEvent(a).then(function(t){e.subscribedToEvent=!0,"DEFAULT_OK"!==t.data.errorMSG_internal?r.Error(t.data.errorMSG_user):(e.for_next_call=t.data.for_next_call,e.uID=t.data.uID,r.Success(t.data.errorMSG_user))},function(t){r.Error(e.configData.errorMessage)})}var i=this;i.SubscribeToEvent=l,i.EventsJSONMapping=n,function(){e.subscribedToEvent=!1,a()}(),$(".tab-list").click(function(e){e.preventDefault(),$(this).tab("show")})}angular.module("app").controller("UpcomingEventsCalendarController",e),e.$inject=["$rootScope","EventsService","$scope","FlashService","EventsJSONMapping"]}(),function(){"use strict";function e(e,t,o,r){function n(){l.dataLoading=!0;var n=l.username,a=l.password;a=a.toUpperCase(),t.GetAccessToken().then(function(i){r.for_next_call=i.data.for_next_call,r.next_code=i.data.next_code,r.next_resp=i.data.next_resp;var c={from_prev_call:r.for_next_call,uName:n,uPass:a};t.Login(c).then(function(t){""!==t.data.errorMSG_user?(t={success:!1,message:t.data.errorMSG_user},o.Error(t.message),l.dataLoading=!1):(r.for_next_call=t.data.for_next_call,r.uID=t.data.uID,e.path("/upcomingEventsCalendar"),r.isSuccesfullyLoggedin=!0,$(".navbar-default").removeClass("hide"))},function(t){l.dataLoading=!1,e.path("/login"),o.Error(r.configData.errorMessage)})},function(t){l.dataLoading=!1,e.path("/login"),o.Error(r.configData.errorMessage)})}function a(n){l.dataLoading=!0,t.GetAccessToken().then(function(n){r.for_next_call=n.data.for_next_call,r.next_code=n.data.next_code,r.next_resp=n.data.next_resp;var a={from_prev_call:r.for_next_call,uName:l.badgeNumber,uEmail:l.email};t.ForgotPassword(a).then(function(t){"DEFAULT_OK"!==t.data.errorMSG_internal?(t={success:!1,message:t.data.errorMSG_user},o.Error(t.message),l.dataLoading=!1):e.path("/forgotPasswordSuccess")},function(t){o.Error(r.configData.errorMessage),e.path("/login")})})}var l=this;l.login=n,l.forgotPassword=a,function(){t.ClearCredentials()}()}angular.module("app").controller("LoginController",e),e.$inject=["$location","AuthenticationService","FlashService","$rootScope"]}(),function(){"use strict";function e(e,t,o,r){function n(){a.dataLoading=!0;var n={from_prev_call:r.for_next_call,uID:r.uID};t.Logout(n).then(function(t){a.dataLoading=!1,"DEFAULT_OK"!==t.data.errorMSG_internal?($(".signout-error-message").html(t.data.errorMSG_user),o.Error(t.data.errorMSG_user)):($(".navbar-default").addClass("hide"),e.path("/login"))},function(e){a.dataLoading=!1,$(".signout-error-message").html(response.data.errorMSG_user),o.Error(r.configData.errorMessage)})}var a=this;!function(){n()}(),$(".signout").click(function(e){n()})}angular.module("app").controller("LogoutController",e),e.$inject=["$location","AuthenticationService","FlashService","$rootScope"]}(),function(){"use strict";function e(e,t,o,r,n){function a(){o.showUserProfile=!1;var e={from_prev_call:t.for_next_call,uID:t.uID};n.GetPersonalDetails(e).then(function(e){""!==e.data.errorMSG_user?(e={success:!1,message:"Cannot fetch user details"},r.Error(e.message),i.dataLoading=!1):(t.for_next_call=e.data.for_next_call,t.uID=e.data.uID,o.showUserProfile=!0,o.userProfile=e.data.userProfile)},function(e){r.Error(t.configData.errorMessage)})}function l(e){var o={from_prev_call:t.for_next_call,uID:t.uID,userProfile:e};n.UpdateProfile(o).then(function(e){"DEFAULT_OK"!==e.data.errorMSG_internal?(r.Error(e.data.errorMSG_user),i.dataLoading=!1):(t.for_next_call=e.data.for_next_call,t.uID=e.data.uID,r.Success(""!==e.data.errorMSG_user?e.data.errorMSG_user:"user data updated successfully !!!"))},function(e){r.Error(t.configData.errorMessage)})}var i=this;i.UpdateProfile=l,function(){a()}()}angular.module("app").controller("ProfilePageController",e),e.$inject=["$location","$rootScope","$scope","FlashService","UserprofileService"]}();