!function(){"use strict";function e(e,t,r){e.when("/",{controller:"HomeController",templateUrl:"app/home/home.view.html",controllerAs:"vm"}).when("/login",{controller:"LoginController",templateUrl:"app/login/login.view.html",controllerAs:"vm"}).when("/logout",{controller:"LogoutController",templateUrl:"app/login/logout.view.html",controllerAs:"vm"}).when("/forgotPassword",{controller:"LoginController",templateUrl:"app/login/forgotPassword.view.html",controllerAs:"vm"}).when("/forgotPasswordSuccess",{controller:"LoginController",templateUrl:"app/login/forgotPasswordSuccess.view.html",controllerAs:"vm"}).when("/scheduledEventsCalendar",{controller:"ScheduledEventsCalendarController",templateUrl:"app/eventsCalendar/scheduledEventsCalendar.view.html",controllerAs:"vm"}).when("/upcomingEventsCalendar",{controller:"UpcomingEventsCalendarController",templateUrl:"app/eventsCalendar/upcomingEventsCalendar.view.html",controllerAs:"vm"}).when("/profilePage",{controller:"ProfilePageController",templateUrl:"app/profilePage/profilePage.view.html",controllerAs:"vm"}).when("/register",{controller:"RegisterController",templateUrl:"app/register/register.view.html",controllerAs:"vm"}).otherwise({redirectTo:"/login"})}function t(e,t,o){e.$on("$locationChangeStart",function(o,a,n){r(t,e)})}function r(e,t){var r=$.inArray(e.path(),["/login","/forgotPassword","/forgotPasswordSuccess"])===-1,o=t.isSuccesfullyLoggedin;r&&!o&&($(".navbar-default").addClass("hide"),e.path("/login"))}angular.module("app",["ngRoute"]).config(e).run(t),e.$inject=["$routeProvider","$locationProvider","$httpProvider"],t.$inject=["$rootScope","$location","$http"],r.$inject=["$location","$rootScope"]}(),function(){"use strict";function e(e,t){function r(){return e({method:"GET",url:t.configData.webApi+"genAppAuthToken",headers:{"Content-Type":"application/json"}})}function o(r){return e({method:"POST",url:t.configData.webApi+"authenticateUser",data:JSON.stringify(r),cache:!1,headers:{"Content-Type":"application/json",prev_code:t.headers.next_code,prev_resp:t.headers.next_resp}})}function a(r){return e({method:"POST",url:t.configData.webApi+"SignoutUser",data:JSON.stringify(r),cache:!1,headers:{"Content-Type":"application/json",prev_code:t.headers.next_code,prev_resp:t.headers.next_resp}})}function n(r){return e({method:"POST",url:t.configData.webApi+"changePassword",data:JSON.stringify(r),cache:!1,headers:{"Content-Type":"application/json",prev_code:t.headers.next_code,prev_resp:t.headers.next_resp}})}function s(){t.globals={},e.defaults.headers.common.Authorization="Basic"}function i(){e.get("config/config.json").success(function(e){t.configData=e}).error(function(e,r,o,a){t.configData=[{heading:"Error",description:"Could not load json   data"}]})}var c={};return c.GetAccessToken=r,c.Login=o,c.Logout=a,c.ForgotPassword=n,c.ClearCredentials=s,i(),c}angular.module("app").factory("AuthenticationService",e),e.$inject=["$http","$rootScope"]}(),function(){"use strict";function e(e,t){function r(r){return e({method:"POST",url:t.configData.webApi+"getEvents",data:JSON.stringify(r),headers:{"Content-Type":"application/json",prev_code:t.headers.next_code,prev_resp:t.headers.next_resp}})}function o(){e.get("config/config.json").success(function(e){t.configData=e}).error(function(e,r,o,a){t.configData=[{heading:"Error",description:"Could not load json data"}]})}function a(r){return e({method:"POST",url:t.configData.webApi+"subscribeUserToEvent",data:JSON.stringify(r),headers:{"Content-Type":"application/json",prev_code:t.headers.next_code,prev_resp:t.headers.next_resp}})}var n={};return n.GetAllEvents=r,n.SubscribeToEvent=a,o(),n}angular.module("app").factory("EventsService",e),e.$inject=["$http","$rootScope"]}(),function(){"use strict";function e(e){function t(){function t(){var t=e.flash;t&&(t.keepAfterLocationChange?t.keepAfterLocationChange=!1:delete e.flash)}e.$on("$locationChangeStart",function(){t()})}function r(t,r){e.flash={message:t,type:"success",keepAfterLocationChange:r},$("#alertModal").modal("show")}function o(t,r){e.flash={message:t,type:"error",keepAfterLocationChange:r},$("#alertModal").modal("show")}var a={};return a.Success=r,a.Error=o,t(),a}angular.module("app").factory("FlashService",e),e.$inject=["$rootScope"]}(),function(){"use strict";function e(e,t){function r(r){return e({method:"POST",url:t.configData.webApi+"getUserProfile",data:JSON.stringify(r),headers:{"Content-Type":"application/json",prev_code:t.headers.next_code,prev_resp:t.headers.next_resp}})}function o(r){return e({method:"POST",url:t.configData.webApi+"setUserProfile",data:JSON.stringify(r),headers:{"Content-Type":"application/json",prev_code:t.headers.next_code,prev_resp:t.headers.next_resp}})}var a={};return a.GetPersonalDetails=r,a.UpdateProfile=o,a}angular.module("app").factory("UserprofileService",e),e.$inject=["$http","$rootScope"]}(),function(){"use strict";function e(){return{SEQ:0,NUM:1,NAME:2,LOCATION:3,START_DATE_TIME:4,END_DATE_TIME:5,TYPE:6,SKILL:7,COORDINATOR:8}}angular.module("app").factory("EventsJSONMapping",e),e.$inject=[]}(),function(){"use strict";function e(e,t,r,o){function a(){s.dataLoading=!0;var a=s.username,n=s.password;n=n.toUpperCase(),t.GetAccessToken().then(function(i){o.headers=i.headers(),o.data=i.data;var c={uuid:o.data.uuid,from_prev_call:o.data.for_next_call,uName:a,uPass:n};t.Login(c).then(function(t){""!==t.data.errorMSG_user?(t={success:!1,message:"Username or password is incorrect"},r.Error(t.message),s.dataLoading=!1):(o.headers=t.headers(),o.data=t.data,e.path("/upcomingEventsCalendar"),o.isSuccesfullyLoggedin=!0,$(".navbar-default").removeClass("hide"))},function(t){s.dataLoading=!1,e.path("/login"),r.Error(o.configData.errorMessage)})},function(t){s.dataLoading=!1,e.path("/login"),r.Error(o.configData.errorMessage)})}function n(a){s.dataLoading=!0,t.GetAccessToken().then(function(a){o.headers=a.headers(),o.data=a.data;var n={uuid:o.data.uuid,from_prev_call:o.data.for_next_call,uName:s.badgeNumber,uEmail:s.email};t.ForgotPassword(n).then(function(t){"DEFAULT_OK"!==t.data.errorMSG_internal?(t={success:!1,message:t.data.errorMSG_user},r.Error(t.message),s.dataLoading=!1):e.path("/forgotPasswordSuccess")},function(t){r.Error(o.configData.errorMessage),e.path("/login")})})}var s=this;s.login=a,s.forgotPassword=n,function(){t.ClearCredentials()}()}angular.module("app").controller("LoginController",e),e.$inject=["$location","AuthenticationService","FlashService","$rootScope"]}(),function(){"use strict";function e(e,t,r,o){function a(){n.dataLoading=!0;var a={from_prev_call:o.data.for_next_call,uuid:o.data.uuid};t.Logout(a).then(function(t){n.dataLoading=!1,"DEFAULT_OK"!==t.data.errorMSG_internal?($(".signout-error-message").html(t.data.errorMSG_user),r.Error(t.data.errorMSG_user)):($(".navbar-default").addClass("hide"),e.path("/login"))},function(e){n.dataLoading=!1,$(".signout-error-message").html(response.data.errorMSG_user),r.Error(o.configData.errorMessage)})}var n=this;!function(){a()}(),$(".signout").click(function(e){a()})}angular.module("app").controller("LogoutController",e),e.$inject=["$location","AuthenticationService","FlashService","$rootScope"]}(),function(){"use strict";function e(e,t,r,o,a){function n(){r.showUserProfile=!1;var e={from_prev_call:t.data.for_next_call,uuid:t.data.uuid};a.GetPersonalDetails(e).then(function(e){""!==e.data.errorMSG_user?(e={success:!1,message:"Cannot fetch user details"},o.Error(e.message),i.dataLoading=!1):(t.headers=e.headers(),t.data=e.data,r.showUserProfile=!0,r.userProfile=e.data.userProfile)},function(e){o.Error(t.configData.errorMessage)})}function s(e){var r={from_prev_call:t.data.for_next_call,uuid:t.data.uuid,userProfile:e};a.UpdateProfile(r).then(function(e){"DEFAULT_OK"!==e.data.errorMSG_internal?(o.Error(e.data.errorMSG_user),i.dataLoading=!1):(t.headers=e.headers(),t.data=e.data,o.Success(""!==e.data.errorMSG_user?e.data.errorMSG_user:"user data updated successfully !!!"))},function(e){o.Error(t.configData.errorMessage)})}var i=this;i.UpdateProfile=s,function(){n()}()}angular.module("app").controller("ProfilePageController",e),e.$inject=["$location","$rootScope","$scope","FlashService","UserprofileService"]}(),function(){"use strict";function e(e,t,r,o,a){function n(){var a=moment().format("DD/MM/YYYY"),n={cDate:a,from_prev_call:e.data.for_next_call,uuid:e.data.uuid};e.subscribedToEvent?t.GetAllEvents(n).then(function(t){"DEFAULT_OK"!==t.data.errorMSG_internal?(o.Error(t.data.errorMSG_user),s.dataLoading=!1):(e.data=t.data,e.headers=t.headers(),e.scheduledEvents=t.data.month_events_list[3],r.showScheduledEvents=r.scheduledEvents[1].length>0)},function(t){o.Error(e.configData.errorMessage)}):(r.scheduledEvents=e.scheduledEvents,r.showScheduledEvents=e.scheduledEvents[1].length>0)}var s=this;s.EventsJSONMapping=a,function(){n()}()}angular.module("app").controller("ScheduledEventsCalendarController",e),e.$inject=["$rootScope","EventsService","$scope","FlashService","EventsJSONMapping"]}(),function(){"use strict";function e(e,t,r,o,a){function n(){r.upcomingEvents=[],e.scheduledEvents=[];var a=moment().format("DD/MM/YYYY"),n={cDate:a,from_prev_call:e.data.for_next_call,uuid:e.data.uuid};t.GetAllEvents(n).then(function(t){""!==t.data.errorMSG_user?(t={success:!1,message:"Cannot fetch event details"},o.Error(t.message),i.dataLoading=!1):(e.data=t.data,e.headers=t.headers(),e.scheduledEvents=t.data.month_events_list[3],t.data.month_events_list.pop(),r.upcomingEvents=t.data.month_events_list,r.showUpcomingEvents=r.upcomingEvents[1].length>0)},function(t){o.Error(e.configData.errorMessage)})}function s(r,a){a.stopPropagation();var n={from_prev_call:e.data.for_next_call,uuid:e.data.uuid,event_row:{eSEQ:r[0],eNum:r[1],eName:r[2],eLocation:r[3],eStart_date_time:r[4],eEnd_date_time:r[5],oType:r[6],oSkill:r[7],eCoordinator:r[8]}};t.SubscribeToEvent(n).then(function(t){e.subscribedToEvent=!0,"DEFAULT_OK"!==t.data.errorMSG_internal?o.Error(t.data.errorMSG_user):(e.data=t.data,e.headers=t.headers(),o.Success(t.data.errorMSG_user))},function(t){o.Error(e.configData.errorMessage)})}var i=this;i.SubscribeToEvent=s,i.GetAllEvents=n,i.EventsJSONMapping=a,function(){e.subscribedToEvent=!1,n()}(),$(".tab-list").click(function(e){e.preventDefault(),$(this).tab("show")})}angular.module("app").controller("UpcomingEventsCalendarController",e),e.$inject=["$rootScope","EventsService","$scope","FlashService","EventsJSONMapping"]}();